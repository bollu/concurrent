<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Concurrent.Primitive.SmallArray</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Concurrent-Primitive-SmallArray.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Concurrent-Primitive-SmallArray.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">concurrent-0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Edward Kmett 2015</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>Edward Kmett &lt;ekmett@gmail.com&gt;</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>Unsafe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Concurrent.Primitive.SmallArray</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Atomic modification</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Small primitive boxed arrays</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:SmallArray">SmallArray</a> a = <a href="#v:SmallArray">SmallArray</a> (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/ghc-prim-0.4.0.0/GHC-Prim.html#t:SmallArray-35-">SmallArray#</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:SmallMutableArray">SmallMutableArray</a> s a = <a href="#v:SmallMutableArray">SmallMutableArray</a> (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/ghc-prim-0.4.0.0/GHC-Prim.html#t:SmallMutableArray-35-">SmallMutableArray#</a> s a)</li><li class="src short"><a href="#v:newSmallArray">newSmallArray</a> :: PrimMonad m =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a)</li><li class="src short"><a href="#v:readSmallArray">readSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:writeSmallArray">writeSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:indexSmallArray">indexSmallArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a</li><li class="src short"><a href="#v:indexSmallArrayM">indexSmallArrayM</a> :: <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:unsafeFreezeSmallArray">unsafeFreezeSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</li><li class="src short"><a href="#v:unsafeThawSmallArray">unsafeThawSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a)</li><li class="src short"><a href="#v:sameSmallMutableArray">sameSmallMutableArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:copySmallArray">copySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:copySmallMutableArray">copySmallMutableArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:cloneSmallArray">cloneSmallArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a</li><li class="src short"><a href="#v:cloneSmallMutableArray">cloneSmallMutableArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a)</li><li class="src short"><a href="#v:casSmallArray">casSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a -&gt; m (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a>, a)</li><li class="src short"><a href="#v:sizeOfSmallArray">sizeOfSmallArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:sizeOfSmallMutableArray">sizeOfSmallMutableArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:atomicModifySmallArray">atomicModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:atomicModifySmallArray-39-">atomicModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:modifySmallArray">modifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:modifySmallArray-39-">modifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:fetchModifySmallArray">fetchModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:fetchModifySmallArray-39-">fetchModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:localAtomicModifySmallArray">localAtomicModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:localAtomicModifySmallArray-39-">localAtomicModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:localModifySmallArray">localModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:localModifySmallArray-39-">localModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:localFetchModifySmallArray">localFetchModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li><li class="src short"><a href="#v:localFetchModifySmallArray-39-">localFetchModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:SmallArray" class="def">SmallArray</a> a <a href="src/Concurrent-Primitive-SmallArray.html#SmallArray" class="link">Source</a></p><div class="doc"><p>Boxed arrays</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SmallArray" class="def">SmallArray</a> (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/ghc-prim-0.4.0.0/GHC-Prim.html#t:SmallArray-35-">SmallArray#</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:SmallArray" class="caption collapser" onclick="toggleSection('i:SmallArray')">Instances</p><div id="section.i:SmallArray" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-288" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Functor.html#t:Functor">Functor</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-218" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-266" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Foldable.html#t:Foldable">Foldable</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-231" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Traversable.html#t:Traversable">Traversable</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-263" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad-Zip.html#t:MonadZip">MonadZip</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-294" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Applicative.html#t:Alternative">Alternative</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-314" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a></span> <a href="src/Concurrent-Primitive-SmallArray.html#line-310" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-Exts.html#t:IsList">IsList</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-207" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-338" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Data.html#t:Data">Data</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Data.html#t:Data">Data</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-348" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Ord.html#t:Ord">Ord</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-335" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Text-Read.html#t:Read">Read</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Text-Read.html#t:Read">Read</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-332" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Text-Show.html#t:Show">Show</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Text-Show.html#t:Show">Show</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-328" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-324" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> a =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-341" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/GHC-Exts.html#t:Item">Item</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a) = a</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-208" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:SmallMutableArray" class="def">SmallMutableArray</a> s a <a href="src/Concurrent-Primitive-SmallArray.html#SmallMutableArray" class="link">Source</a></p><div class="doc"><p>Mutable boxed arrays associated with a primitive state token.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SmallMutableArray" class="def">SmallMutableArray</a> (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/ghc-prim-0.4.0.0/GHC-Prim.html#t:SmallMutableArray-35-">SmallMutableArray#</a> s a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:SmallMutableArray" class="caption collapser" onclick="toggleSection('i:SmallMutableArray')">Instances</p><div id="section.i:SmallMutableArray" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a)</span> <a href="src/Concurrent-Primitive-SmallArray.html#line-77" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:newSmallArray" class="def">newSmallArray</a> :: PrimMonad m =&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a) <a href="src/Concurrent-Primitive-SmallArray.html#newSmallArray" class="link">Source</a></p><div class="doc"><p>Create a new mutable array of the specified size and initialise all
 elements with the given value.</p></div></div><div class="top"><p class="src"><a name="v:readSmallArray" class="def">readSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#readSmallArray" class="link">Source</a></p><div class="doc"><p>Read a value from the array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:writeSmallArray" class="def">writeSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m () <a href="src/Concurrent-Primitive-SmallArray.html#writeSmallArray" class="link">Source</a></p><div class="doc"><p>Write a value to the array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:indexSmallArray" class="def">indexSmallArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a <a href="src/Concurrent-Primitive-SmallArray.html#indexSmallArray" class="link">Source</a></p><div class="doc"><p>Read a value from the immutable array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:indexSmallArrayM" class="def">indexSmallArrayM</a> :: <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#indexSmallArrayM" class="link">Source</a></p><div class="doc"><p>Monadically read a value from the immutable array at the given index.
 This allows us to be strict in the array while remaining lazy in the read
 element which is very useful for collective operations. Suppose we want to
 copy an array. We could do something like this:</p><pre>copy marr arr ... = do ...
                       writeSmallArray marr i (indexSmallArray arr i) ...
                       ...</pre><p>But since primitive arrays are lazy, the calls to <code><a href="Concurrent-Primitive-SmallArray.html#v:indexSmallArray">indexSmallArray</a></code> will not be
 evaluated. Rather, <code>marr</code> will be filled with thunks each of which would
 retain a reference to <code>arr</code>. This is definitely not what we want!</p><p>With <code><a href="Concurrent-Primitive-SmallArray.html#v:indexSmallArrayM">indexSmallArrayM</a></code>, we can instead write</p><pre>copy marr arr ... = do ...
                       x &lt;- indexSmallArrayM arr i
                       writeSmallArray marr i x
                       ...</pre><p>Now, indexing is executed immediately although the returned element is
 still not evaluated.</p></div></div><div class="top"><p class="src"><a name="v:unsafeFreezeSmallArray" class="def">unsafeFreezeSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a) <a href="src/Concurrent-Primitive-SmallArray.html#unsafeFreezeSmallArray" class="link">Source</a></p><div class="doc"><p>Convert a mutable array to an immutable one without copying. The
 array should not be modified after the conversion.</p></div></div><div class="top"><p class="src"><a name="v:unsafeThawSmallArray" class="def">unsafeThawSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a) <a href="src/Concurrent-Primitive-SmallArray.html#unsafeThawSmallArray" class="link">Source</a></p><div class="doc"><p>Convert an immutable array to an mutable one without copying. The
 immutable array should not be used after the conversion.</p></div></div><div class="top"><p class="src"><a name="v:sameSmallMutableArray" class="def">sameSmallMutableArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Concurrent-Primitive-SmallArray.html#sameSmallMutableArray" class="link">Source</a></p><div class="doc"><p>Check whether the two arrays refer to the same memory block.</p></div></div><div class="top"><p class="src"><a name="v:copySmallArray" class="def">copySmallArray</a> <a href="src/Concurrent-Primitive-SmallArray.html#copySmallArray" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: PrimMonad m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a</td><td class="doc"><p>destination array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Copy a slice of an immutable array to a mutable array.</p></div></div><div class="top"><p class="src"><a name="v:copySmallMutableArray" class="def">copySmallMutableArray</a> <a href="src/Concurrent-Primitive-SmallArray.html#copySmallMutableArray" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: PrimMonad m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a</td><td class="doc"><p>destination array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Copy a slice of a mutable array to another array. The two arrays may
 not be the same.</p></div></div><div class="top"><p class="src"><a name="v:cloneSmallArray" class="def">cloneSmallArray</a> <a href="src/Concurrent-Primitive-SmallArray.html#cloneSmallArray" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return a newly allocated SmallArray with the specified subrange of the
 provided SmallArray. The provided SmallArray should contain the full subrange
 specified by the two Ints, but this is not checked.</p></div></div><div class="top"><p class="src"><a name="v:cloneSmallMutableArray" class="def">cloneSmallMutableArray</a> <a href="src/Concurrent-Primitive-SmallArray.html#cloneSmallMutableArray" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: PrimMonad m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m (<a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return a newly allocated SmallMutableArray. with the specified subrange of
 the provided SmallMutableArray. The provided SmallMutableArray should contain the
 full subrange specified by the two Ints, but this is not checked.</p></div></div><div class="top"><p class="src"><a name="v:casSmallArray" class="def">casSmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a -&gt; m (<a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a>, a) <a href="src/Concurrent-Primitive-SmallArray.html#casSmallArray" class="link">Source</a></p><div class="doc"><p>Perform an unsafe, machine-level atomic compare and swap on an element within an array.</p></div></div><div class="top"><p class="src"><a name="v:sizeOfSmallArray" class="def">sizeOfSmallArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallArray">SmallArray</a> a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> <a href="src/Concurrent-Primitive-SmallArray.html#sizeOfSmallArray" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:sizeOfSmallMutableArray" class="def">sizeOfSmallMutableArray</a> :: <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> s a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> <a href="src/Concurrent-Primitive-SmallArray.html#sizeOfSmallMutableArray" class="link">Source</a></p></div><h1 id="g:1">Atomic modification</h1><div class="top"><p class="src"><a name="v:atomicModifySmallArray" class="def">atomicModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Concurrent-Primitive-SmallArray.html#atomicModifySmallArray" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:atomicModifySmallArray-39-" class="def">atomicModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Concurrent-Primitive-SmallArray.html#atomicModifySmallArray%27" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:modifySmallArray" class="def">modifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#modifySmallArray" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position. Return the new result</p><pre><code><a href="Concurrent-Primitive-SmallArray.html#v:modifySmallArray">modifySmallArray</a></code> m i f = <code><a href="Concurrent-Primitive-SmallArray.html#v:atomicModifySmallArray">atomicModifySmallArray</a></code> m i $ a -&gt; let b = f a in (b, b)
</pre></div></div><div class="top"><p class="src"><a name="v:modifySmallArray-39-" class="def">modifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#modifySmallArray%27" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position strictly. Return the new result.</p><p>Can this be smarter? e.g. start it off already as a blackhole we appear to be evaluating, putting frames on the stack, etc.
 That would avoid anybody ever getting and seeing the unevaluated closure.</p></div></div><div class="top"><p class="src"><a name="v:fetchModifySmallArray" class="def">fetchModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#fetchModifySmallArray" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position. Return the old result.</p></div></div><div class="top"><p class="src"><a name="v:fetchModifySmallArray-39-" class="def">fetchModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#fetchModifySmallArray%27" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position strictly. Return the old result.</p></div></div><div class="top"><p class="src"><a name="v:localAtomicModifySmallArray" class="def">localAtomicModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Concurrent-Primitive-SmallArray.html#localAtomicModifySmallArray" class="link">Source</a></p><div class="doc"><p>Modify the contents of a position in an array in a manner that at least can't be preempted another thread in the current capability.</p></div></div><div class="top"><p class="src"><a name="v:localAtomicModifySmallArray-39-" class="def">localAtomicModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Concurrent-Primitive-SmallArray.html#localAtomicModifySmallArray%27" class="link">Source</a></p><div class="doc"><p>Modify the contents of a position in an array strictly in a manner that at least can't be preempted another thread in the current capability.</p></div></div><div class="top"><p class="src"><a name="v:localModifySmallArray" class="def">localModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#localModifySmallArray" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position. Return the new result.</p><p>Logically,</p><pre><code><a href="Concurrent-Primitive-SmallArray.html#v:localModifySmallArray">localModifySmallArray</a></code> m i f = <code><a href="Concurrent-Primitive-SmallArray.html#v:localAtomicModifySmallArray">localAtomicModifySmallArray</a></code> m i $ a -&gt; let b = f a in (b, b)
</pre><p>but it is a bit more efficient.</p></div></div><div class="top"><p class="src"><a name="v:localModifySmallArray-39-" class="def">localModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#localModifySmallArray%27" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position strictly. Return the new result.</p><p>Can this be smarter? e.g. start it off already as a blackhole we appear to be evaluating, putting frames on the stack, etc.
 That would avoid anybody ever getting and seeing the unevaluated closure.</p></div></div><div class="top"><p class="src"><a name="v:localFetchModifySmallArray" class="def">localFetchModifySmallArray</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#localFetchModifySmallArray" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position. Return the old result.</p></div></div><div class="top"><p class="src"><a name="v:localFetchModifySmallArray-39-" class="def">localFetchModifySmallArray'</a> :: PrimMonad m =&gt; <a href="Concurrent-Primitive-SmallArray.html#t:SmallMutableArray">SmallMutableArray</a> (PrimState m) a -&gt; <a href="file:///usr/local/Cellar/ghc/7.10.2/share/doc/ghc/html/libraries/base-4.8.1.0/Data-Int.html#t:Int">Int</a> -&gt; (a -&gt; a) -&gt; m a <a href="src/Concurrent-Primitive-SmallArray.html#localFetchModifySmallArray%27" class="link">Source</a></p><div class="doc"><p>Modify the contents of an array at a given position strictly. Return the old result.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>